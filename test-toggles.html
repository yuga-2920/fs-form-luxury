<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toggle Test - Form Sections</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        iframe {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Form Toggle Implementation Test</h1>
    
    <div class="test-section">
        <h2>Test Summary</h2>
        <div id="test-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Live Form Preview</h2>
        <p>The sections below should have toggle functionality:</p>
        <ul>
            <li><strong>Section 6:</strong> Corporate Information - Toggle checkbox to show/hide fields</li>
            <li><strong>Section 8-1:</strong> Fashion Stance - Toggle checkbox to make selection optional</li>
            <li><strong>Section 8-3:</strong> Proposal Frequency - Toggle checkbox to make selection optional</li>
        </ul>
        <iframe src="index.html#section6"></iframe>
    </div>
    
    <script>
        // Test the implementation
        function runTests() {
            const results = document.getElementById('test-results');
            let testsPassed = 0;
            let totalTests = 0;
            
            // Load the form in a hidden iframe for testing
            const testFrame = document.createElement('iframe');
            testFrame.src = 'index.html';
            testFrame.style.display = 'none';
            document.body.appendChild(testFrame);
            
            testFrame.onload = function() {
                const doc = testFrame.contentDocument;
                
                // Test 1: Check if toggle elements exist
                totalTests++;
                const corporateToggle = doc.getElementById('isCorporate');
                const fashionStanceToggle = doc.getElementById('hasFashionStance');
                const proposalFrequencyToggle = doc.getElementById('hasProposalFrequency');
                
                if (corporateToggle && fashionStanceToggle && proposalFrequencyToggle) {
                    testsPassed++;
                    results.innerHTML += '<div class="status success">✓ All toggle checkboxes found</div>';
                } else {
                    results.innerHTML += '<div class="status error">✗ Some toggle checkboxes missing</div>';
                }
                
                // Test 2: Check if content divs exist
                totalTests++;
                const corporateContent = doc.getElementById('corporateInfoContent');
                const fashionStanceContent = doc.getElementById('fashionStanceContent');
                const proposalFrequencyContent = doc.getElementById('proposalFrequencyContent');
                
                if (corporateContent && fashionStanceContent && proposalFrequencyContent) {
                    testsPassed++;
                    results.innerHTML += '<div class="status success">✓ All content containers found</div>';
                } else {
                    results.innerHTML += '<div class="status error">✗ Some content containers missing</div>';
                }
                
                // Test 3: Check initial state (should be hidden)
                totalTests++;
                if (corporateContent.style.display === 'none' && 
                    fashionStanceContent.style.display === 'none' && 
                    proposalFrequencyContent.style.display === 'none') {
                    testsPassed++;
                    results.innerHTML += '<div class="status success">✓ All content initially hidden</div>';
                } else {
                    results.innerHTML += '<div class="status error">✗ Some content not initially hidden</div>';
                }
                
                // Test 4: Check if required attributes are removed
                totalTests++;
                const stanceRadios = fashionStanceContent.querySelectorAll('input[type="radio"][name="fashionStance"]');
                const frequencyRadios = proposalFrequencyContent.querySelectorAll('input[type="radio"][name="proposalFrequency"]');
                let requiredRemoved = true;
                
                stanceRadios.forEach(radio => {
                    if (radio.hasAttribute('required')) requiredRemoved = false;
                });
                frequencyRadios.forEach(radio => {
                    if (radio.hasAttribute('required')) requiredRemoved = false;
                });
                
                if (requiredRemoved) {
                    testsPassed++;
                    results.innerHTML += '<div class="status success">✓ Required attributes removed from optional sections</div>';
                } else {
                    results.innerHTML += '<div class="status error">✗ Required attributes still present on optional sections</div>';
                }
                
                // Summary
                results.innerHTML += `<div class="status ${testsPassed === totalTests ? 'success' : 'error'}">
                    <strong>Test Results: ${testsPassed}/${totalTests} passed</strong>
                </div>`;
                
                // Clean up
                document.body.removeChild(testFrame);
            };
        }
        
        // Run tests when page loads
        window.onload = runTests;
    </script>
</body>
</html>